<%- include('partials/header') %> <%- include('partials/navbar') %>

<div id="carouselExampleInterval" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active" data-interval="10000">
      <img src="https://source.unsplash.com/600x200/?programming" class="d-block w-100" alt="..." />
    </div>
    <div class="carousel-item" data-interval="2000">
      <img src="https://source.unsplash.com/600x200/?computer" class="d-block w-100" alt="..." />
    </div>

    <a class="carousel-control-prev" href="#carouselExampleInterval" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleInterval" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>

  <!-- details card section starts from here -->
  <section class="details-card">
    <div class="container">
      <div class="row">
        <% Post.map(post=>{ %>
        <div class="col-md-4">
          <div class="card-content">
            <div class="card-img">
              <img src="<%= post.image %>" alt="" />
              <span>
                <h4><%= post.category %></h4>
              </span>
            </div>
            <div class="card-desc">
              <% if (post.title.length >40){ %> 
                <h3><%= post.title.slice(0,40) %>...</h3>
              <% } else{ %> 
                <h3><%= post.title.slice(0,40) %></h3>
              <% } %> 
              <% if (post.title.length >30){ %> 
                <p><%- post.content.slice(0,60) %>...</p>
              <% } else if (post.title.length >20){ %> 
                <p><%- post.content.slice(0,80) %>...</p>
              <% } else{ %> 
                <p><%- post.content.slice(0,100) %>...</p>
              <% } %>  
            </div>
            <div class="text-right"><a href="posts/<%= post.title  %>" class="btn btn-success mb-1 mr-1">Read More...</a></div>
            
          </div>
        </div>
        <% }) %>
      </div>
    </div>
    <div class="mt-5">
       <% if(paginate.hasPreviousPages || paginate.hasNextPages){ %>
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <% if(paginate.hasPreviousPages){ %>
          <li class="page-item">
            <a class="page-link" href="<%= paginate.href(true) %>" tabindex="-1">Previous</a>
          </li>
          <% } else{ %>
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">Previous</a>
          </li>
          <% } %> 
          <% if(pages){ %>
          <% pages.map(page=>{ %>
            <% if(page.number === activePage){ %> 
          <li class="page-item active">
            <a class="page-link" href="<%= page.url %>"><%= page.number %> </a>
          </li>
        <% } else { %> 
          <li class="page-item ">
            <a class="page-link" href="<%= page.url %>"><%= page.number %> </a>
          </li>
        <% } %> 
          <% }) %> 
          <% } %>
           <% if(paginate.hasNextPages(pageCount)){ %>
          <li class="page-item">
            <a class="page-link" href="<%= paginate.href() %>" tabindex="-1">Next</a>
          </li>
          <% } else{ %>
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">Next</a>
          </li>
          <% } %>
        </ul>
      </nav>
      <% } %>
    </div>
  </section>
  <!-- details card section starts from here -->

  <%- include('partials/footer') %>
</div>